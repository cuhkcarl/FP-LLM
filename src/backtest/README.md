# FPL 回测框架 MVP

这是FPL策略回测系统的最小可行产品(MVP)实现。

## 核心功能

### ✅ 已实现

1. **S0策略（静态基准）**
   - 基于群体智慧的预计算最优15人阵容
   - 自动选择每周最佳11人首发阵容
   - 智能队长选择
   - 完整的FPL规则验证

2. **回测执行引擎**
   - 历史数据加载和处理
   - 策略决策执行
   - 得分计算和验证
   - 结果收集和统计

3. **数据管理**
   - vaastav 2023-24赛季历史数据支持
   - 自动数据预处理
   - 错误处理和数据验证

4. **结果验证**
   - 手工计算验证
   - 完整的测试覆盖
   - 数据完整性检查

## 快速开始

### 1. 运行S0策略回测

```bash
# 运行前5周的S0策略回测
python scripts/run_backtest.py --strategy s0 --start-gw 1 --end-gw 5

# 自定义参数
python scripts/run_backtest.py \
    --strategy s0 \
    --season 2023-24 \
    --start-gw 1 \
    --end-gw 10 \
    --formation 3-4-3 \
    --output results/my_test.yaml
```

### 2. 验证结果正确性

```bash
# 运行验证脚本
python scripts/verify_backtest.py
```

### 3. 重新生成S0最优阵容

```bash
# 如果需要重新计算S0阵容
python src/backtest/strategies/s0_generator.py
```

## 核心设计原则

### 1. 先跑起来 (MVP优先)
- 专注于核心功能实现
- 简单直接的代码结构
- 完整的端到端流程

### 2. 可验证性
- 手工计算验证
- 完整的测试覆盖
- 数据完整性检查

### 3. 可扩展性
- 模块化设计
- 策略接口标准化
- 配置驱动

### 4. 目标导向
- 解决实际问题
- 清晰的成功标准
- 迭代式开发

## 下一步计划

1. **S1策略实现** - 添加转会决策逻辑
2. **基准计算** - 实现B1-B4基准策略
3. **性能优化** - 并行化和缓存优化
4. **更多数据** - 支持多个赛季数据
5. **高级分析** - 风险分析和敏感性测试

---

*此MVP实现验证了核心概念的可行性，为后续完整系统开发奠定了坚实基础。*
